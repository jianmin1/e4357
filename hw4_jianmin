I had worked on this assignment with one of the classmates.

#include "mbed.h" 
2 Serial async_port(p9, p10);         //set up TX and RX on pins 9 and 10 
3 DigitalOut red_led(p25);            //red led 
4 DigitalOut green_led(p26);          //green led 
5 DigitalOut strobe(p7);              //a strobe to trigger the scope 
6 DigitalIn switch_ip1(p5); 
7 DigitalIn switch_ip2(p6); 
8 char switch_word ;                  //the word we will send 
9 char recd_val;                      //the received value 
10 
 
11 int main()  
12 { 
13    async_port.baud(9600);            //set baud rate to 9600 (ie default) 
14    //accept default format, of 8 bits, no parity 
15    while (1) 
16    { 
17        //Set up the word to be sent, by testing switch inputs 
18        switch_word=0xa0;               //set up a recognizable output pattern 
19        if (switch_ip1==1) 
20          switch_word=switch_word|0x01; //OR in lsb 
21        if (switch_ip2==1) 
22          switch_word=switch_word|0x02; //OR in next lsb 
23        strobe =1;                      //short strobe pulse 
24        wait_us(10); 
25        strobe=0; 
26        async_port.putc(switch_word);   //transmit switch_word 
27        if (async_port.readable()==1)   //is there a character to be read? 
28          recd_val=async_port.getc();   //if yes, then read it 
29         
30          red_led=0;              //preset both to 0 
31          green_led=0; 
32          recd_val=recd_val&0x03; //AND out unwanted bits 
33          if (recd_val==1) 
34          red_led=1; 
35          if (recd_val==2) 
36          green_led=1; 
37          if (recd_val==3) 
38          { 
39             red_led=1; 
40             green_led=1; 
41          } 
42 } 
